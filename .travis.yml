# whitelist
language: python
python:
  - 3.6
branches:
  only:
    - master
sudo: required
services:
#Enable docker service inside travis
  - docker
before_install:
  - sudo apt-get update
  - sudo apt-get install -yq python3-pip libzmq3-dev wget
  - cd /usr/local
  - wget https://storage.googleapis.com/golang/go1.9.linux-amd64.tar.gz
  - tar -C /usr/local -xzf gogolang/go1.9.linux-amd64.tar.gz
  - export PATH=$PATH:/usr/local/go/bin
  - go get golang.org/x/tools/cmd/cover
  - go get -t -v ./...
install:
  - pip3 install jupyter_kernel_gateway==1.2.2
script:
  - make test
  - make
  - docker --version  # document the version travis is using
  - export PATH=$PATH:$HOME/.local/bin # put aws in the path
after_script:
  #build core-server and push to dockerhub
  - bash config/buildDockerImage.sh
after_success:
  - bash <(curl -s https://codecov.io/bash)
notifications:
  slack: 3blades:0hkVceOdmVuyXNpgHJHCneo9
env:
  - $DOCKER_IMAGE_NAME="3blades/core-server"
